---

title: MySQL字段类型优化

date: 2019-06-04 20:30

updated: 2019-06-04 20:30

tags:
- MySQL

categories: MySQL

permalink: mysql-column-type

---



## 整数类型

1. tinyint、smallint、mediumint、int、bigint，其它的类型都是别名，它们分别占用8、16、24、32、64位空间，越来越大
2. 优先选更小的类型，除非最大范围不够用
3. 是否unsigned，对性能无影响
4. int(1)和int(11)，对性能无影响



## 实数类型

1. `float`、`double`，支持浮点运算

2. 存储精确的小数时，选用`decimal`，除非过早的版本，decimal支持高精度运算，运算速度不如浮点运算

3. 金额推荐使用整数类型

   例如，`10.01`可以存储成`1001`，约定以“分”代替“元”进行存储，计算代价小



## 字符串类型

1. `varchar`往往比`char`节省空间，前者只使用必要的空间，后者会用空格填成定长

2. 以下情况适合使用`varchar`

   - 数据长度不一
   - 变更次数少
   - 使用了UTF-8这样的或是更复杂的字符集

3. 以下情况适合使用`char`

   - 数据长度很短
   - 数据长度接近一致，特别是各种md5值
   - 经常变更

4. `binary`和`varbinary`是二进制版本的`char`、`varchar`，存储的是字节码，使用`0而不是空格填充

5. 尽量预估数据可能的最大长度，给`varchar`安排真正需要的空间

   因为`varchar(200)`虽然和`varchar(10)`存储同一个字符串空间开销是一样的，但是更短的列会消耗更少的内存，利用磁盘临时表排序时性能也更好



## “时间”类型

1. datetime可以存储1001年到9999年范围，精度为秒，无时区，本质上是以YYYYMMDDHHMMSS形式的整数存储的
2. timestamp可以存储1970年到2038年范围，精度为秒，显示会与时区有关，比datetime类型占用更少的空间



